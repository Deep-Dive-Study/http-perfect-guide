# 16. 국제화

# 1. 국제적인 컨텐츠를 다르기 위한 HTTP

HTTP 엔티티 본문은 비트로 되어있어 문자로 디코딩이 필요하다. Content_Type charset과 Content-Language 헤더가 이를 도와준다.

클라이언트는 Accept-Language와 Accept-Charset으로 무엇을 선호하는지 알려준다

```sql
Accept-Language: fr, en;q=0.8 (프랑스어, 영어 순으로 선호)
Accept-Charset: iso-8859-1, utf-8
```

# 2. 문자집합과 HTTP

Charset : 글자를 비트로 변환하는 인코딩이다. Content-Type에 쓰인다.

잘못된 charset을 갖는 경우 클라이언트는 이상한 글자를 보여주게 된다.

### 2.2 문자집합과 인코딩 동작 방식

1. 인코딩 구조를 사용하여 디코딩 한다.
2. 코딩된 문자집합을 사용해 글자를 찾는다.

### 2.4  MIME

MINE : 특정 문자 인코딩과 특정 코딩된 문자집합의 결합을 뜻한다.

표준화된 MINE은 LANA에 등록되어 있다. (ex.utf-8)

### 2.5 Content-Type과 charset

Content-Type 헤더엔 콘텐츠 타입과 charset을 담아 보낸다.

만약 문자집합이 명시적으로 나열되지 않았다면 문서의 컨텐츠로부터 추측해야 한다.

HTML엔 <META HTTP-EQUIV=”Content-Type”> 태그가 있다.

### 2.6 Accept-Charset

클라이언트가 서버에게 정확히 어떤 문자 체계를 지원하는지 알려주기 위한 헤더이다. 하나만 적는게 아니라 나열할 수 있다.

# 3. 다중언어 문자 인코딩에 대한 지침

문자 : 알파벳, 숫자, 구두점, 기호등 글쓰기의 최소 단위이다.

글리프 : 하나의 글자를 표현하기 위한 획의 패턴이나 구분되는 유일한 시각적 형태

문자 인코딩 구조 : 숫자로 된 문자 코드들을 콘텐츠 비트의 연속으로 인코딩 하는 알고리즘. (압축, 제약 회피, 코딩된 문자집 통합에 사용)

### 3.3 문자

문자는 글꼴이나 스타일에 독립적이다. 다른 스타일이어도 같은 글자라는 것을 알아야 한다.

### 3.4 글리프

글리프와 문자를 헷갈려선 안되는데, 문자는 유일하고 추상화된 언어의 요소이고, 글리프는 각 글자를 그리는 특정한 방법이다.

각 문자는 미적인 양식과 스크립트에 따라 여러가지 글리프를 가진다.

### 3.5 코딩된 문자열 집합

코딩된 문자지한은 보통 코드 번호로 인덱싱된 배열로 구현된다.

ASCII부터 iso-8859 등이 있다.

### 3.6 문자 인코딩 구조

8비트, UTF-8 등등이 있다.

- 고정폭 : 각 코딩된 문자를 고정길이 비트로 표현한다. 빠르지만, 공간 낭비 우려
- 가변폭(비모달) : 각 코딩된 문자마다 다른 길이의 비트를 갖는다. 이전 버전과 호환성 유지 가능
- 가변폭(모달) : 다른 모드로 전환을 위해 특별한 escape 패턴을 사용한다.

# 4. 언어 태그와 HTTP

언어 태그 : 언어에 이름을 붙이기 위한 짧고 표준화된 문자열 (en, de, ko, fr 등)

- 언어 태그는 대소문자 구분을 하지 않는다.
- n개의 서브태그로 이루어져 있다. (최대 8글자)
    - 첫 번째 서브태그 : 표준 언어 집합에서 선택된 언어 토큰
    - 두 번째 서브태그 : 국가 코드와 지역 표준 집합에서 선택된 국가 토큰
    - 그 이후 : 이름 공간으로 별다른 규칙은 없다.

### 4.1 Content-Length 헤더

기본적인 언어 태그 뿐만 아니라, 지역 방언, 특정 사용자를 위한 특별한 태그도 사용이 된다.

### 4.3 언어 태그와 종류

언어 태그 표현은 다양하다.

- 일반적인 언어 종류 (en, ko, es, de)
- 특정 국가의 언어 (en-GB, en-US)
- 방언 (no-bok)
- 지방어 (sgn-US-MA)
- 언어 변형이 아닌 표준 언어 (i-navajo)
- 비표준 언어 (x-snowboarder-slang)

# 5. 국제화된 URI

오늘날 URI는 국제화를 지원하지 않는다.

URI에서 사용될 수 있는 문자는 ASCII 문자 집합과 이스케이프 문자이다.

- 언이스케이핑 할 때 기호가 포함된 URI를 갖도록 하면 데이터 손실을 유발할 수 있으니 유의하자.
- 이스케이프 인코딩을 할 때 US-ASCII 코드 범위 내에 있어야 한다(0-127)

# 6. 기타 고려사항

- HTTP 헤더는 반드시 US-ASCII 문자집합의 글자들로만 이루어져야 한다.
- 모든 서버와 클라이언트가 GMT를 지키지 않기 때문에 관대하게 받아들이고 처리해야 한다.
- 도메인 이름은 퓨니코드로 변환되는데, 이는 다국어로 입력된 도메인을 알파벳과 숫자로 변환한다.
